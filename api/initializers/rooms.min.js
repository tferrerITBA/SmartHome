var _0xe14b=['ensureIndex','error','info','nedb','path','rooms','rooms.db','models','room','toDto','insert','name','fromDto','update','_id','context','find','map','findOne','config','paths','dbName','log',']...'];(function(_0x3c16be,_0x2ede4d){var _0x2f5aba=function(_0x555e71){while(--_0x555e71){_0x3c16be['push'](_0x3c16be['shift']());}};_0x2f5aba(++_0x2ede4d);}(_0xe14b,0x93));var _0xbe14=function(_0x587782,_0x3063d3){_0x587782=_0x587782-0x0;var _0x4212cc=_0xe14b[_0x587782];return _0x4212cc;};'use strict';var Datastore=require(_0xbe14('0x0'));var Path=require(_0xbe14('0x1'));module['exports']={'initialize':function(_0x5cc4d8,_0x11c3a0){_0x5cc4d8[_0xbe14('0x2')]={'dbName':_0xbe14('0x3'),'create':function(_0x7d3665){return new Promise((_0x5ce8fb,_0x496c04)=>{var _0x1833e3=_0x5cc4d8[_0xbe14('0x4')][_0xbe14('0x5')][_0xbe14('0x6')](_0x7d3665);_0x5cc4d8['db'][_0xbe14('0x2')][_0xbe14('0x7')](_0x1833e3,(_0x196fca,_0x566ae7)=>{if(_0x196fca){_0x196fca['context']={'entity':{'type':_0xbe14('0x5'),'id':_0x1833e3[_0xbe14('0x8')]}};_0x496c04(_0x196fca);}else{_0x5ce8fb(_0x5cc4d8[_0xbe14('0x4')][_0xbe14('0x5')][_0xbe14('0x9')](_0x566ae7));}});});},'update':function(_0x53c7ea){return new Promise((_0x5b9fc6,_0x113243)=>{var _0x3f70cb=_0x5cc4d8[_0xbe14('0x4')][_0xbe14('0x5')][_0xbe14('0x6')](_0x53c7ea);_0x5cc4d8['db'][_0xbe14('0x2')][_0xbe14('0xa')]({'_id':_0x3f70cb[_0xbe14('0xb')]},_0x3f70cb,{},(_0x3b898d,_0x23a730)=>{if(_0x3b898d){_0x3b898d[_0xbe14('0xc')]={'entity':{'type':_0xbe14('0x5'),'id':_0x3f70cb[_0xbe14('0x8')]}};_0x113243(_0x3b898d);}else{_0x5b9fc6(_0x23a730==0x1);}});});},'delete':function(_0x1e4826){return new Promise((_0x33fd54,_0x813399)=>{_0x5cc4d8['db']['rooms']['remove']({'_id':_0x1e4826},{},(_0x3f58f5,_0x3dc4a9)=>{if(_0x3f58f5){_0x813399(_0x3f58f5);}else{_0x33fd54(_0x3dc4a9==0x1);}});});},'retrieveAll':function(){return new Promise((_0xf4ac9,_0x37ce4e)=>{_0x5cc4d8['db']['rooms'][_0xbe14('0xd')]({},(_0xe9c3ec,_0xfd7b8f)=>{if(_0xe9c3ec){_0x37ce4e(_0xe9c3ec);}else{var _0x123ede=_0xfd7b8f[_0xbe14('0xe')](_0x29ab73=>{return _0x5cc4d8[_0xbe14('0x4')]['room'][_0xbe14('0x9')](_0x29ab73);});_0xf4ac9(_0x123ede);}});});},'retrieveById':function(_0x456ca8){return new Promise((_0x329588,_0x433459)=>{_0x5cc4d8['db'][_0xbe14('0x2')][_0xbe14('0xf')]({'_id':_0x456ca8},(_0x59a9e3,_0x24f820)=>{if(_0x59a9e3){_0x433459(_0x59a9e3);}else{_0x329588(_0x5cc4d8[_0xbe14('0x4')][_0xbe14('0x5')][_0xbe14('0x9')](_0x24f820));}});});}};return _0x11c3a0();},'start':function(_0x188ec4,_0x51dc0b){var _0xe60f42=Path['join'](_0x188ec4[_0xbe14('0x10')]['general'][_0xbe14('0x11')]['db'][0x0],_0x188ec4[_0xbe14('0x2')][_0xbe14('0x12')]);_0x188ec4[_0xbe14('0x13')]('loading\x20room\x20database\x20['+_0xe60f42+_0xbe14('0x14'),'debug');_0x188ec4['db']=_0x188ec4['db']||{};_0x188ec4['db'][_0xbe14('0x2')]=new Datastore({'filename':_0xe60f42,'autoload':!![]});_0x188ec4['db'][_0xbe14('0x2')][_0xbe14('0x15')]({'fieldName':_0xbe14('0x8'),'unique':!![]},_0x1ee9c1=>{if(_0x1ee9c1)_0x188ec4[_0xbe14('0x13')](_0x1ee9c1,_0xbe14('0x16'));});_0x188ec4[_0xbe14('0x13')]('room\x20database\x20loaded',_0xbe14('0x17'));return _0x51dc0b();}};